<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Cat√°logo de produtos online">
  <title>Cat√°logo de Produtos</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <h1 class="logo" id="nomeLoja">Carregando...</h1>
      <nav class="header-nav">
        <a href="#produtos" class="nav-link">Produtos</a>
        <a href="#filtros" class="nav-link mobile-only">Filtros</a>
      </nav>
    </div>
  </header>

  <!-- Aviso de Taxa de Entrega -->
  <div class="aviso-entrega" id="avisoEntrega" style="display: none;">
    <div class="container">
      <span class="aviso-icon">üèçÔ∏è</span>
      <span class="aviso-texto">Taxa de Entrega Via Motoboy: <strong id="valorTaxa">R$ 8,00</strong></span>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <div class="catalog-layout">
        <!-- Sidebar de Filtros -->
        <aside class="filtros-sidebar" id="filtros">
          <div class="filtros-header">
            <h2>Filtros</h2>
            <button id="btnLimparFiltros" class="btn-limpar">Limpar</button>
          </div>

          <!-- Busca Simples -->
          <div class="filtro-grupo">
            <h3>Buscar</h3>
            <input type="text" id="campoBusca" class="campo-busca" placeholder="Digite para buscar...">
          </div>

          <!-- Filtros de Categoria -->
          <div class="filtro-grupo" id="grupoCategoria" style="display: none;">
            <h3>Categoria</h3>
            <div id="filtrosCategoria" class="filtro-opcoes">
              <!-- Gerado dinamicamente -->
            </div>
          </div>

          <!-- Filtros de Marca -->
          <div class="filtro-grupo">
            <h3>Marca</h3>
            <div id="filtrosMarca" class="filtro-opcoes">
              <!-- Gerado dinamicamente -->
            </div>
          </div>

          <!-- Filtros de Tamanho -->
          <div class="filtro-grupo">
            <h3>Tamanho</h3>
            <div id="filtrosTamanho" class="filtro-opcoes">
              <!-- Gerado dinamicamente -->
            </div>
          </div>
        </aside>

        <!-- Grid de Produtos -->
        <section class="produtos-section" id="produtos">
          <div class="produtos-header">
            <h2>Produtos</h2>
            <p id="contadorProdutos" class="contador">0 produtos</p>
          </div>

          <div id="produtosGrid" class="produtos-grid">
            <!-- Produtos gerados dinamicamente -->
            <div class="loading-state">
              <div class="loading-spinner"></div>
              <p>Carregando produtos...</p>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 Cat√°logo de Produtos. Todos os direitos reservados.</p>
    </div>
  </footer>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <!-- Configura√ß√£o Firebase -->
  <script>
    // IMPORTANTE: Substitua pelas suas credenciais do Firebase
    const firebaseConfig = {
       apiKey: "AIzaSyAZ90xAptvBeRDFl52FI7-WJJD14I6YKk4",
  authDomain: "drak-feet-admin.firebaseapp.com",
  projectId: "drak-feet-admin",
  storageBucket: "drak-feet-admin.firebasestorage.app",
  messagingSenderId: "525123704162",
  appId: "1:525123704162:web:ea0a3bc86663334a79c83b",
  measurementId: "G-EFERT7RZZ5"
    };

    firebase.initializeApp(firebaseConfig);
    console.info('‚úÖ Firebase inicializado');
  </script>

  <!-- Scripts -->
  <script src="assets/js/data.service.js"></script>
  <script src="assets/js/tracking.service.js"></script>
  <script src="assets/js/catalog.render.js"></script>
  <script src="assets/js/filters.js"></script>

  <!-- Inicializa√ß√£o -->
  <script>
    async function inicializarCatalogo() {
      try {
        // Inicializar servi√ßo
        DataService.init();

        // Buscar configura√ß√µes
        const config = await DataService.buscarConfig();
        document.getElementById('nomeLoja').textContent = config.nomeLoja;
        document.title = `${config.nomeLoja} - Cat√°logo`;
        CatalogRender.setConfig(config);

        // Exibir taxa de entrega
        if (config.taxaMotoboy && config.taxaMotoboy > 0) {
          const avisoDiv = document.getElementById('avisoEntrega');
          const valorSpan = document.getElementById('valorTaxa');
          valorSpan.textContent = `R$ ${config.taxaMotoboy.toFixed(2).replace('.', ',')}`;
          avisoDiv.style.display = 'block';
        }

        // Inicializar tracking
        TrackingService.init(config);

        // Buscar produtos
        CatalogRender.mostrarLoading();
        const produtos = await DataService.buscarProdutos();

        // Renderizar
        CatalogRender.renderizarProdutos(produtos);
        Filters.init(produtos, config);
        Filters.atualizarContadores(produtos.length);

      } catch (error) {
        console.error('‚ùå Erro ao inicializar cat√°logo:', error);
        const grid = document.getElementById('produtosGrid');
        if (grid) {
          grid.innerHTML = `
            <div class="error-state">
              <p>Erro ao carregar produtos. Tente novamente mais tarde.</p>
            </div>
          `;
        }
      }
    }

    // Executar ao carregar
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', inicializarCatalogo);
    } else {
      inicializarCatalogo();
    }
  </script>
</body>
</html>