<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Cat√°logo de produtos online">
  <title>Cat√°logo de Produtos</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <!-- Header Fixo -->
  <div class="header-sticky">
    <!-- Aviso de Taxa de Entrega -->
    <div class="aviso-entrega" id="avisoEntrega" style="display: none;">
      <div class="container">
        <span class="aviso-icon">üèçÔ∏è</span>
        <span class="aviso-texto">Taxa de Entrega Via Motoboy: <strong id="valorTaxa">R$ 8,00</strong></span>
      </div>
    </div>

    <!-- Header Principal -->
    <header class="header">
      <div class="container">
        <h1 class="logo" id="nomeLoja">Carregando...</h1>
        <button class="btn-filtros-mobile" id="btnFiltrosMobile">
          <span class="icon">‚öôÔ∏è</span>
          Filtros
        </button>
      </div>
    </header>

    <!-- Menu de Categorias -->
    <nav class="menu-categorias" id="menuCategorias">
      <div class="container">
        <div class="categorias-scroll">
          <button class="categoria-item active" data-categoria="todas">
            Todas
          </button>
          <!-- Categorias geradas dinamicamente -->
        </div>
      </div>
    </nav>
  </div>

  <!-- Aviso Informativo -->
  <div class="aviso-info" id="avisoInfo" style="display: none;">
    <div class="container">
      <p class="aviso-texto" id="avisoInfoTexto"></p>
      <a href="#" class="btn-aviso" id="btnAvisoInfo" target="_blank"></a>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Overlay para filtros mobile -->
      <div class="filtros-overlay" id="filtrosOverlay"></div>

      <!-- Sidebar de Filtros -->
      <aside class="filtros-sidebar" id="filtrosSidebar">
        <div class="filtros-header">
          <h2>Filtros</h2>
          <button class="btn-fechar-filtros" id="btnFecharFiltros">‚úï</button>
        </div>

        <div class="filtros-content">
          <!-- Busca Simples -->
          <div class="filtro-grupo">
            <h3>Buscar</h3>
            <input type="text" id="campoBusca" class="campo-busca" placeholder="Digite para buscar...">
          </div>

          <!-- Filtros de Marca -->
          <div class="filtro-grupo">
            <h3>Marca</h3>
            <div id="filtrosMarca" class="filtro-opcoes">
              <!-- Gerado dinamicamente -->
            </div>
          </div>

          <!-- Filtros de Tamanho -->
          <div class="filtro-grupo">
            <h3>Tamanho</h3>
            <div id="filtrosTamanho" class="filtro-opcoes">
              <!-- Gerado dinamicamente -->
            </div>
          </div>

          <button id="btnLimparFiltros" class="btn-limpar-full">Limpar Filtros</button>
        </div>
      </aside>

      <!-- √Årea de Produtos -->
      <section class="produtos-area">
        <div class="produtos-header">
          <h2>Produtos</h2>
          <p id="contadorProdutos" class="contador">0 produtos</p>
        </div>

        <!-- Produtos por Categoria -->
        <div id="produtosPorCategoria">
          <!-- Gerado dinamicamente -->
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 Cat√°logo de Produtos. Todos os direitos reservados.</p>
    </div>
  </footer>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <!-- Configura√ß√£o Firebase -->
  <script>
    // IMPORTANTE: Substitua pelas suas credenciais do Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyAZ90xAptvBeRDFl52FI7-WJJD14I6YKk4",
  authDomain: "drak-feet-admin.firebaseapp.com",
  projectId: "drak-feet-admin",
  storageBucket: "drak-feet-admin.firebasestorage.app",
  messagingSenderId: "525123704162",
  appId: "1:525123704162:web:ea0a3bc86663334a79c83b",
  measurementId: "G-EFERT7RZZ5"
    };

    firebase.initializeApp(firebaseConfig);
    console.info('‚úÖ Firebase inicializado');
  </script>

  <!-- Scripts -->
  <script src="assets/js/data.service.js"></script>
  <script src="assets/js/tracking.service.js"></script>
  <script src="assets/js/catalog.render.js"></script>
  <script src="assets/js/filters.js"></script>

  <!-- Inicializa√ß√£o -->
  <script>
    async function inicializarCatalogo() {
      try {
        DataService.init();

        const config = await DataService.buscarConfig();
        document.getElementById('nomeLoja').textContent = config.nomeLoja;
        document.title = `${config.nomeLoja} - Cat√°logo`;
        CatalogRender.setConfig(config);

        // Exibir taxa de entrega
        if (config.taxaMotoboy && config.taxaMotoboy > 0) {
          const avisoDiv = document.getElementById('avisoEntrega');
          const valorSpan = document.getElementById('valorTaxa');
          valorSpan.textContent = `R$ ${config.taxaMotoboy.toFixed(2).replace('.', ',')}`;
          avisoDiv.style.display = 'block';
        }

        // Exibir aviso informativo
        if (config.avisoTexto && config.avisoTexto.trim() !== '') {
          const avisoInfoDiv = document.getElementById('avisoInfo');
          const avisoTextoP = document.getElementById('avisoInfoTexto');
          const btnAviso = document.getElementById('btnAvisoInfo');
          
          avisoTextoP.textContent = config.avisoTexto;
          btnAviso.textContent = config.avisoBotaoTexto || 'Saiba Mais';
          btnAviso.href = config.avisoBotaoUrl || '#';
          avisoInfoDiv.style.display = 'block';
        }

        TrackingService.init(config);

        CatalogRender.mostrarLoading();
        const produtos = await DataService.buscarProdutos();

        CatalogRender.renderizarPorCategorias(produtos);
        Filters.init(produtos, config);
        Filters.atualizarContadores(produtos.length);

      } catch (error) {
        console.error('‚ùå Erro ao inicializar cat√°logo:', error);
        const container = document.getElementById('produtosPorCategoria');
        if (container) {
          container.innerHTML = `
            <div class="error-state">
              <p>Erro ao carregar produtos. Tente novamente mais tarde.</p>
            </div>
          `;
        }
      }
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', inicializarCatalogo);
    } else {
      inicializarCatalogo();
    }
  </script>
</body>
</html>